# TAG to KAF

Convert TAG files (the files used by the Kafannotator) into KAF files with
opinions. These scripts are used to convert the output of the manual annotation
of texts with the KafAnnotator into valid KAF files with opinions. These script
are all in python and you will need the KafNafParserPy library in order to run
these scripts (https://github.com/cltl/KafNafParserPy).

There are three scripts depending on the type of data you want to convert, as
different guidelines were used for annotating different types of reviews:

* Hotel reviews: the script for converting this type of annotation is
  tag_to_kaf_opinions.py
* News reviews: the script in this case is tag_to_kaf_opinions_news.py
* Attraction reviews: script tag_to_kaf_opinions_attractions.py

In all the cases there are two main functionalities of these scripts:

* Generation: for creating the KAF files with the annotations in the TAG files
* Checking: generates some statistics and error analysis about the TAG files

To run these scripts in any of the two previous ways, you need to put all the
TAG files in one folder, and all the original KAF files in another folder. The
filename of a file in TAG and in KAF must be the same, of course with exception
of the extension (.tag or .kaf).  There are four parameters, the first one is
-generate o -check for selecting the type, the second is the path to the TAG
folder, the third the path to the original KAF folder, and the last one the
path where you want to store the new KAF files. For instance:

    tag_to_kaf_opinions.py  -generate tag_folder kaf_folder out_folder

The previous command would extract the opinion annotations from `tag_folder`,
would read the original KAF files from `kaf_folder` and would store the final
KAF files in `out_folder`. The scripts also generate log and error information
in the standard and error output, so you might redirect these descriptors to
files.

## Example of formal check

These are the list of files generated by the automatic checker (option -check)

log_aspects_span_not_1.txt:

* files with aspects with a span longer than 1 token
* needs to revised if the span contains non-relevant words
* most cases are ok

log_aspects_span_just_1.txt:

* files with aspects with a span of 1 token
* just to check the aspect tags
* errors need to be revised
* most cases are ok

log_norating.txt:

* files with no overall rating
* needs to be added (each file contains a overall rating at the first position)

log_notags_level1.txt:

* files with Opinion tag (level2) and empty (NoTag) tokens in level 1
  (including info about which opinion ids and number of empty tags)
* no revision needed. The tag at level2 will be automatically removed

log_notags_level2.txt:

* files with tags at level 1 and no Opinion tag at level 2 (including the token
  ids affected)
* needs to be revised; tag level 2 needs to be added

log_crossed_opinions.txt:

* files with opinions with multiple expressions, holders or targets
* need to be revised if the holders, expressions and targets should not be in
  the span of one single opinion id

    /*****EXAMPLE***************************************************/
    /* bad and good girls and boys -> one single opinionID *********/
    /* bad girls, good girls, bad boys, good boys ******************/
    /******---------------------------------------------------******/
    /* bad girls and good boys -> 2 different opinionIDs************/
    /* bad girls, good boys  (*bad boys, *good girls) **************/
    /***************************************************************/

missing_tag_files.txt:

* tag files missing. There is KAF file but not TAG file
* the file is not annotated
* annotations must be added

annotated_opinions:

* this is a folder with one file for each TAG file, containing all the opinions
  (and opinions elements) annotated in each file
* the overview is for checking; errors need to be revised

## Contact

* Ruben Izquierdo
* Vrije University of Amsterdam
* ruben.izquierdobevia@vu.nl
